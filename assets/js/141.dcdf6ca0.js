(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{443:function(e,t,r){"use strict";r.r(t);var a=r(43),o=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("ðŸ’¡ Learn more : "),r("a",{attrs:{href:"https://docs.microsoft.com/azure/containers/?WT.mc_id=docs-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure for Containers"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("ðŸ“º Watch the video : "),r("a",{attrs:{href:"https://www.youtube.com/watch?v=R--rdLMN-Wk&list=PLLasX02E8BPCNCK8Thcxu-Y-XcBUbhFWC&index=41?WT.mc_id=youtube-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to Create a Container Image with Docker"),r("OutboundLink")],1),e._v(".")])]),e._v(" "),r("h4",{attrs:{id:"containers-for-the-rest-of-us"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#containers-for-the-rest-of-us","aria-hidden":"true"}},[e._v("#")]),e._v(" Containers for the rest of us")]),e._v(" "),r("p",[e._v("For some reason, I find containers are confusing and my goal with my "),r("a",{attrs:{href:"https://michaelcrump.net/azure-tips-and-tricks-complete-list/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Tips and Tricks"),r("OutboundLink")],1),e._v(" is to try to make things easier. In this mini-series, I'll walk you through "),r("a",{attrs:{href:"https://www.docker.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),r("OutboundLink")],1),e._v(" and how I use it with Azure. Below is a list of post that you can expect for this week.")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://microsoft.github.io/AzureTipsAndTricks/blog/tip45.html?WT.mc_id=github-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Tips and Tricks Part 45 - Getting Started with Docker and Azure"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://microsoft.github.io/AzureTipsAndTricks/blog/tip46.html?WT.mc_id=github-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Tips and Tricks Part 46 - Run an app inside a Container Image with Docker"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://microsoft.github.io/AzureTipsAndTricks/blog/tip47.html?WT.mc_id=github-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("Today - Azure Tips and Tricks Part 47 - Creating a Container Image with Docker"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://microsoft.github.io/AzureTipsAndTricks/blog/tip47.html?WT.mc_id=github-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Tips and Tricks Part 48 - Pushing a Container Image to a Docker Repo"),r("OutboundLink")],1)])]),e._v(" "),r("h4",{attrs:{id:"create-an-app-to-run-inside-a-container-image-with-docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#create-an-app-to-run-inside-a-container-image-with-docker","aria-hidden":"true"}},[e._v("#")]),e._v(" Create an app to run inside a Container Image with Docker")]),e._v(" "),r("p",[e._v("Let's continue where we "),r("a",{attrs:{href:"https://microsoft.github.io/AzureTipsAndTricks/blog/tip46.html?WT.mc_id=github-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[e._v("left off"),r("OutboundLink")],1),e._v(" in our last post, which showed how to use an image from the Docker Store as our base and create our own console app. In this post, we'll create a new image that we can distribute that contains our new app.")]),e._v(" "),r("p",[e._v("Remember how we used the "),r("code",[e._v("dotnet build")]),e._v(" command in the last post? Well if you navigate the file structure of our existing console app, then you'll see there is a "),r("code",[e._v("myapp.dll")]),e._v(" that contains the executable code.")]),e._v(" "),r("div",{staticClass:"language-text line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("root@40bac5113803:~/myapp/bin/Debug/netcoreapp2.0# dir\nmyapp.deps.json  myapp.dll  myapp.pdb  myapp.runtimeconfig.dev.json  myapp.runtimeconfig.json\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("If you navigate back to the "),r("code",[e._v("root")]),e._v(" directory, then you can run "),r("code",[e._v("dotnet run -p /myapp/myapp.csproj")]),e._v(" to see the "),r("code",[e._v("Hello World!")]),e._v(" output.")]),e._v(" "),r("p",[e._v("Let's save this into a file that we can run later.")]),e._v(" "),r("p",[e._v("Type cd "),r("code",[e._v("cd /usr/local/bin")]),e._v(" and then "),r("code",[e._v("cat > startmyapp.sh")]),e._v(". Add "),r("code",[e._v("#!/bin/bash")]),e._v(" to the first line and then "),r("code",[e._v("dotnet run -p /myapp/myapp.csproj")]),e._v(" to the second line. Press CTRL-D to exit out.")]),e._v(" "),r("p",[e._v("Try out the command by typing "),r("code",[e._v("sh startmyapp.sh")]),e._v(" and your app should run.")]),e._v(" "),r("img",{attrs:{src:e.$withBase("/files/dockerazure7.png")}}),e._v(" "),r("p",[e._v("Type "),r("code",[e._v("exit")]),e._v(" and you'll return to Terminal or command prompt window.")]),e._v(" "),r("p",[e._v("Now we want to add our application to a container.")]),e._v(" "),r("p",[e._v("Run "),r("code",[e._v("docker ps -a")]),e._v(" to see what the name of our container is.")]),e._v(" "),r("div",{staticClass:"language-text line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES\n7c5da93bf968        c0                  "bash"              10 minutes ago      Exited (0) 51 seconds ago                       myapp\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("Now run "),r("code",[e._v("docker commit 7c mbcrump:awesomeapp")]),e._v(" to add the app to a container. After docker commit, we took the first two characters of the "),r("code",[e._v("container id")]),e._v(" and created the name "),r("code",[e._v("mbcrump")]),e._v(" and gave it a tag of "),r("code",[e._v("awesomeapp")]),e._v(".")]),e._v(" "),r("p",[e._v("Now we can run "),r("code",[e._v("docker images")]),e._v(" to see our new image!")]),e._v(" "),r("div",{staticClass:"language-text line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Michaels-MacBook-Pro:~ mbcrump$ docker images\nREPOSITORY                   TAG                 IMAGE ID            CREATED              SIZE\nmbcrump                      mynewapp            82eb1e5914dc        About a minute ago   1.85GB\nmbcrump                      awesomeapp          1f254a9917aa        16 minutes ago       1.85GB\nmicrosoft/aspnetcore-build   latest              c0c285a7a306        44 hours ago         1.85GB\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br")])]),r("p",[e._v("Now run "),r("code",[e._v("docker run 82 startmyapp.sh")]),e._v(" where "),r("code",[e._v("82")]),e._v(" is the image id and "),r("code",[e._v("startmyapp.sh")]),e._v(" is the shell script that we created earlier.")]),e._v(" "),r("img",{attrs:{src:e.$withBase("/files/dockerazure8.png")}})])},[],!1,null,null,null);t.default=o.exports}}]);